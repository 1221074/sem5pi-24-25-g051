

<div class="admin-header">
  <h2>Admin</h2>
  <button class="logout-button" (click)="logout()">
    <span class="material-icons">logout</span>
  </button>
</div>
<div class="admin-container">

  <section class="admin-section" [style.display]="selectedSection ? 'none' : 'block'">
    <div class="admin-panel">
      <h3>Admin Panel:</h3>
      <button (click)="showSection('registerUser')">Register User</button>
    </div>
    <div class="admin-patient-management">
      <h3>Patient Management:</h3>
      <button (click)="showSection('createPatient')">Create Patient Profile</button>
      <button (click)="showSection('editPatient')">Edit Patient Profile</button>
      <button (click)="showSection('deletePatient')">Delete Patient Profile</button>
      <button (click)="showSection('listPatients')">List/Search Patient Profiles</button>
    </div>
    <div class="admin-staff-management">
      <h3>Staff Management:</h3>
      <button (click)="showSection('createStaff')">Create Staff Profile</button>
      <button (click)="showSection('editStaff')">Edit Staff Profile</button>
      <button (click)="showSection('deactivateStaff')">Deactivate Staff Profile</button>
      <button (click)="showSection('listStaff')">List/Search Staff Profiles</button>
    </div>
    <div class="admin-operation-type-management">
      <h3>Operation Type Management:</h3>
      <button (click)="showSection('addOperationType')">Add Operation Type</button>
      <button (click)="showSection('editOperationType')">Edit Operation Type</button>
      <button (click)="showSection('removeOperationType')">Remove Operation Type</button>
      <button (click)="showSection('listOperationTypes')">List/Search Operation Types</button>
    </div>
  </section>

<section class="admin-3d-visualization" *ngIf="!selectedSection">
      <h3>3D Visualization Module:</h3>
      <button (click)="showSection('3dVisualization')">3D Visualization</button>

      <h3>Planning Module:</h3>
      <button (click)="showSection('optimizedPlanning')">Optimized Planning</button>
      <button (click)="showSection('preferedPlanning')">Prefered Schedule</button>
      <button (click)="showSection('dimensionPlanning')">Dimension in Terms of Number of Surgeries</button>
    </section>


  <!-- Register User Section -->
  <section [style.display]="selectedSection === 'registerUser' ? 'block' : 'none'">
    <h2>Register User</h2>
    <p>Here you can register a new user.</p>

    <!-- Display success or error messages -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <div class="user-form">
      <form>
        <div class="form-group">
          <label for="nif">NIF:</label><br>
          <input type="text" id="nif" name="nif" placeholder="NIF" #nifRef required>
        </div>

        <div class="form-group">
          <label for="userName">Username:</label><br>
          <input type="text" id="userName" name="userName" placeholder="Username" #userNameRef required>
        </div>

        <div class="form-group">
          <label for="email">Email:</label><br>
          <input type="email" id="email" name="email" placeholder="Email" #emailRef required>
        </div>

        <div class="form-group">
          <label for="phoneNumber">Phone Number:</label><br>
          <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="Phone Number" #phoneNumberRef required>
        </div>

        <div class="form-group">
          <label for="role">Role:</label><br>
          <select id="role" name="role" #roleRef required>
            <option value="" disabled selected>Select Role</option>
            <option value="ADMIN">ADMIN</option>
            <option value="DOCTOR">DOCTOR</option>
            <option value="NURSE">NURSE</option>
            <option value="TECHNICIAN">TECHNICIAN</option>
            <option value="PATIENT">PATIENT</option>
            <!-- Add more roles as needed -->
          </select>
        </div>
      </form>
    </div>

    <button
      class="register-button"
      type="button"
      (click)="registerUser(
        nifRef.value,
        userNameRef.value,
        emailRef.value,
        phoneNumberRef.value,
        roleRef.value
      )"
    >
      Register User
    </button>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>



  <!-- Patient Sections -->
  <section [style.display]="selectedSection === 'createPatient' ? 'block' : 'none'">
    <head>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
      <style>
          body {
              font-family: 'Roboto', sans-serif;
          }
      </style>
    </head>
    <h2>Create Patient Profile</h2>
    <p>Here you can create a new patient profile.</p>
    <P>Please enter the following data about the new patient.</P>
    <!-- Display success or error messages -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <div class="patient-name">
      <form>
        <label for="name">Patient Name:</label><br>
        <input type="text" id="firstName" name="firstName" placeholder="Fist Name" #firstNameRef required>
        <input type="text" id="lastName" name="lastName" placeholder="Last Name" #lastNameRef required>
      </form>
    </div>
    <div class="patient-fullName">
      <form>
        <input type="text" id="fullName" name="fullName" placeholder="Full Name" #fullNameRef required>
      </form>
    </div>
    <br>
    <div class="patient-sex-birthdate">
      <form>
        <label for="sex-birthdate">Patient Sex and Birthdate:</label><br>
        <select id="Sex" name="sex" #sexRef required>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="" disabled selected>Select Sex</option>
        </select>
        <input type="date" id="Birthdate" name="birthdate" placeholder="Birth date" #birthDateRef required>
      </form>
    </div>
    <div class="patient-contact">
      <form>
        <label for="contactInfo">Contact Information:</label><br>
        <input type="email" id="email" name="email" placeholder="Email" #emailRef required>
        <input type="tel" id="phone" name="phone" placeholder="Phone Number" #phoneRef required>
        <input type="tel" id="emergencycontact" name="emergencycontact" placeholder="Emergency Contact" #emergencyRef required>
      </form>
    </div>
    <button
      class="patientBtn"
      type="button"
      (click)="registerPatient(
        firstNameRef.value,
        lastNameRef.value,
        fullNameRef.value,
        birthDateRef.value,
        sexRef.value,
        emailRef.value,
        phoneRef.value,
        emergencyRef.value
      )"
    >
      Register Patient
    </button>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- Patient Update Section -->
  <section [style.display]="selectedSection === 'editPatient' ? 'block' : 'none'">
    <h2>Edit Patient Profile</h2>
    <p>Here you can edit an existing patient profile.</p>

     <!-- Display success or error messages -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <!-- Table for Patients -->
  <table class="table-display">
    <tr>
      <th>Patient ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Full Name</th>
      <th>Birth Date</th>
      <th>Sex</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Emergency Contact</th>
      <th>Action</th>
    </tr>

    <tr *ngFor="let patient of patientList">
      <td>{{ patient.id }}</td>
      <td>{{ patient.firstName }}</td>
      <td>{{ patient.lastName }}</td>
      <td>{{ patient.fullName}}</td>
      <td>{{ patient.birthDate | date: 'yyyy-MM-dd HH:mm' }}</td>
      <td>{{ patient.sex }}</td>
      <td>{{ patient.email }}</td>
      <td>{{ patient.phone }}</td>
      <td>{{ patient.emergencyContact }}</td>
      <td>
        <button (click)="selectPatientForUpdate(patient)">Edit</button>
      </td>
    </tr>
  </table>

  <!-- Update Form -->
  <div *ngIf="selectedPatient">
    <h3>Update Patient ID: {{ selectedPatient.id }}</h3>
    <div class="patient-name">
      <form>
        <label for="updatedname">Patient Name:</label><br>
        <input type="text" id="updatedfirstName" name="firstName" placeholder="Fist Name" #updatedfirstNameRef required>
        <input type="text" id="updatedlastName" name="lastName" placeholder="Last Name" #updatedlastNameRef required>
      </form>
    </div>
    <div class="updatedpatient-fullName">
      <form>
        <input type="text" id="updatedfullName" name="fullName" placeholder="Full Name" #updatedfullNameRef required>
      </form>
    </div>
    <br>
    <div class="updatedpatient-sex-birthdate">
      <form>
        <label for="sex-birthdate">Patient Sex and Birthdate:</label><br>
        <select id="updatedSex" name="sex" #updatedsexRef required>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="" disabled selected>Select Sex</option>
        </select>
        <input type="date" id="updatedBirthdate" name="birthdate" placeholder="Birth date" #updatedbirthDateRef required>
      </form>
    </div>
    <div class="patient-contact">
      <form>
        <label for="contactInfo">Contact Information:</label><br>
        <input type="email" id="updatedemail" name="email" placeholder="Email" #updatedemailRef required>
        <input type="tel" id="updatedphone" name="phone" placeholder="Phone Number" #updatedphoneRef required>
        <input type="tel" id="updatedemergencycontact" name="emergencycontact" placeholder="Emergency Contact" #updatedemergencyRef required>
      </form>
    </div>

      <button type="button" (click)="cancelUpdate()">Cancel</button>
  </div>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'deletePatient' ? 'block' : 'none'">
    <h2>Delete Patient Profile</h2>
    <p>Here you can delete a patient profile.</p>
    <form>
      <input type="text" placeholder="Search Patients" #filter (input)="filterResults(filter.value)" />
      <button class="patientsBtn" type="button" (click)="filterResults(filter.value)">Search</button>
    </form>
     <!-- Table for Patients -->
  <table class="table-display">
    <tr>
      <th>Patient ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Full Name</th>
      <th>Birth Date</th>
      <th>Sex</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Emergency Contact</th>
      <th>Action</th>
    </tr>

    <tr *ngFor="let patient of patientList">
      <td>{{ patient.id }}</td>
      <td>{{ patient.firstName }}</td>
      <td>{{ patient.lastName }}</td>
      <td>{{ patient.fullName}}</td>
      <td>{{ patient.birthDate | date: 'yyyy-MM-dd HH:mm' }}</td>
      <td>{{ patient.sex }}</td>
      <td>{{ patient.email }}</td>
      <td>{{ patient.phone }}</td>
      <td>{{ patient.emergencyContact }}</td>
      <td>
        <button class="table-button" (click)="submitRemoval(patient.id)">Remove</button>
      </td>
    </tr>
  </table>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'listPatients' ? 'block' : 'none'">
    <h2>List/Search Patient Profiles</h2>
    <p>Here you can list or search for patient profiles.</p>
    <table class="table-display">
      <tr>
        <th>Patient ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Full Name</th>
        <th>Birth Date</th>
        <th>Sex</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Emergency Contact</th>
      </tr>

      <tr *ngFor="let patient of patientList">
        <td>{{ patient.id }}</td>
        <td>{{ patient.firstName }}</td>
        <td>{{ patient.lastName }}</td>
        <td>{{ patient.fullName}}</td>
        <td>{{ patient.birthDate | date: 'yyyy-MM-dd HH:mm' }}</td>
        <td>{{ patient.sex }}</td>
        <td>{{ patient.email }}</td>
        <td>{{ patient.phone }}</td>
        <td>{{ patient.emergencyContact }}</td>
      </tr>
    </table>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- Staff Sections -->
  <section class="staff-create" [style.display]="selectedSection === 'createStaff' ? 'block' : 'none'">
    <head>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
      <style>
          body {
              font-family: 'Roboto', sans-serif;
          }
      </style>
    </head>


    <h2>Create Staff Profile</h2>
    <p>Here you can create a new staff profile.</p>
    <P>Please enter the following data about the new staff member.</P>
    <form>
      <div class="staff-name">
        <input type="text" id="firstName" name="firstName" #firstName placeholder="First Name" required>

        <input type="text" id="lastName" name="lastName" #lastName placeholder="Last Name" required>
      </div>

      <div class="staff-fullName">
        <input type="text" id="fullName" name="fullName" #fullName placeholder="Full Name" required>
      </div>

      <div class="staff-contact">
        <input type="email" id="email" name="email" #email placeholder="Email" required>

        <input type="tel" id="phone" name="phone" #phone placeholder="Phone Number" required>
      </div>

      <div class="staff-specialization">
        <select id="specialization" name="specialization" #specialization required>
          <option value="" disabled selected>Select Specialization</option>
          <option *ngFor="let spec of specList" [value]="spec.id">
            {{ spec.specializationName }}
          </option>
        </select>
      </div>

      <br>

      <div class="button-staff-submit">
        <button type="button" (click)="registerStaff(firstName.value, lastName.value, fullName.value, specialization.value, email.value, phone.value)">Submit</button>
        <button type="button" (click)="showSection('')">Back to Main Menu</button>
      </div>
      </form>
  </section>

<section [style.display]="selectedSection === 'editStaff' ? 'block' : 'none'">
  <h2>Edit Staff Profile</h2>
  <p>Here you can edit an existing staff profile.</p>

  <!-- Display success or error messages -->
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <!-- Table for Staff Members -->
  <table class="table-display">
    <tr>
      <th>Staff ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Full Name</th>
      <th>Specialization ID</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Action</th>
    </tr>

    <tr *ngFor="let staff of staffList">
      <td>{{ staff.id }}</td>
      <td>{{ staff.firstName }}</td>
      <td>{{ staff.lastName }}</td>
      <td>{{ staff.fullName }}</td>
      <td>{{ staff.specializationId }}</td>
      <td>{{ staff.email }}</td>
      <td>{{ staff.phone }}</td>
      <td>
        <button (click)="selectStaffForUpdate(staff)">Edit</button>
      </td>
    </tr>
  </table>

  <!-- Update Form -->
  <div *ngIf="selectedStaff">
    <h3>Update Staff ID: {{ selectedStaff.id }}</h3>
    <div class="staff-name">
      <form>
        <label for="updatedFirstName">First Name:</label><br>
        <input
          type="text"
          id="updatedFirstName"
          name="firstName"
          placeholder="First Name"
          #updatedFirstNameRef
          required
          [value]="selectedStaff.firstName"
        />
        <label for="updatedLastName">Last Name:</label><br />
        <input
          type="text"
          id="updatedLastName"
          name="lastName"
          placeholder="Last Name"
          #updatedLastNameRef
          required
          [value]="selectedStaff.lastName"
        />
      </form>
    </div>
    <div class="staff-fullName">
      <form>
        <label for="updatedFullName">Full Name:</label><br />
        <input
          type="text"
          id="updatedFullName"
          name="fullName"
          placeholder="Full Name"
          #updatedFullNameRef
          required
          [value]="selectedStaff.fullName"
        />
      </form>
    </div>
    <br />
    <div class="staff-contact">
      <form>
        <label for="updatedEmail">Email:</label><br />
        <input
          type="email"
          id="updatedEmail"
          name="email"
          placeholder="Email"
          #updatedEmailRef
          required
          [value]="selectedStaff.email"
        />
        <label for="updatedPhone">Phone Number:</label><br />
        <input
          type="tel"
          id="updatedPhone"
          name="phone"
          placeholder="Phone Number"
          #updatedPhoneRef
          required
          [value]="selectedStaff.phone"
        />
      </form>
    </div>
    <br />
    <div class="staff-specialization">
      <form>
        <label for="updatedSpecialization">Specialization:</label><br />
        <select
          id="updatedSpecialization"
          name="specialization"
          #updatedSpecializationRef
          required
        >
          <option value="" disabled>Select Specialization</option>
          <option
            *ngFor="let spec of specList"
            [value]="spec.id"
            [selected]="spec.id === selectedStaff.specializationId"
          >
            {{ spec.specializationName }}
          </option>
        </select>
      </form>
    </div>
    <br />
    <button
      type="button"
      (click)="updateStaff(
        selectedStaff.id,
        updatedFirstNameRef.value,
        updatedLastNameRef.value,
        updatedFullNameRef.value,
        updatedSpecializationRef.value,
        updatedEmailRef.value,
        updatedPhoneRef.value
      )"
    >
      Update Staff
    </button>
    <button type="button" (click)="cancelUpdate()">Cancel</button>
  </div>


  <button (click)="showSection('')">Back to Main Menu</button>
</section>

  <section [style.display]="selectedSection === 'deactivateStaff' ? 'block' : 'none'">
    <h2>Deactivate Staff Profile</h2>
    <p>Here you can deactivate a staff profile.</p>

    <table class="table-display">
      <tr>
        <th>Staff ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Full Name</th>
        <th>Specialization ID</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Action</th>
      </tr>

      <tr *ngFor="let staff of staffList">
        <td>{{ staff.id }}</td>
        <td>{{ staff.firstName }}</td>
        <td>{{ staff.lastName }}</td>
        <td>{{ staff.fullName }}</td>
        <td>{{ staff.specializationId }}</td>
        <td>{{ staff.email }}</td>
        <td>{{ staff.phone }}</td>
        <td>
          <button (click)="submitStaffDeactivation(staff.id)">Deactivate</button>
        </td>
      </tr>
    </table>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'listStaff' ? 'block' : 'none'">
    <h2>List/Search Staff Profiles</h2>
    <p>Here you can list or search for staff profiles.</p>
    <table class="table-display">
    <tr>
      <th>Staff ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Full Name</th>
      <th>Specialization ID</th>
      <th>Email</th>
      <th>Phone</th>
    </tr>

    <tr *ngFor="let staff of staffList">
      <td>{{ staff.id }}</td>
      <td>{{ staff.firstName }}</td>
      <td>{{ staff.lastName }}</td>
      <td>{{ staff.fullName }}</td>
      <td>{{ staff.specializationId }}</td>
      <td>{{ staff.email }}</td>
      <td>{{ staff.phone }}</td>
    </tr>
    </table>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- Operation Types Sections -->
  <section [style.display]="selectedSection === 'addOperationType' ? 'block' : 'none'">
    <h2>Add Operation Type</h2>
    <p>Here you can add a new operation type.</p>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'editOperationType' ? 'block' : 'none'">
    <h2>Edit Operation Type</h2>
    <p>Here you can edit an existing operation type.</p>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'removeOperationType' ? 'block' : 'none'">
    <h2>Remove Operation Type</h2>
    <p>Here you can remove an obsolete operation type.</p>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <section [style.display]="selectedSection === 'listOperationTypes' ? 'block' : 'none'">
    <h2>List/Search Operation Types</h2>
    <p>Here you can list or search for operation types.</p>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- 3D Visualization Module -->

  <section [style.display]="selectedSection === '3dVisualization' ? 'block' : 'none'">
    <h2>3D Visualization</h2>
    <p>Here you can see the 3D visualization of the hospital.</p>
    <button class="visualization-button" (click)="showHospital()">3D Visualization</button>
    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- Planning Module -->

  <!-- 6.3.1-->
  <section [style.display]="selectedSection === 'optimizedPlanning' ? 'block' : 'none'">
    <h2>Optimized Planning</h2>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <form (ngSubmit)="startOptimizedPlanning()">
      <label for="roomNumber">Room Number:</label>
      <input id="roomNumber" type="text" [(ngModel)]="roomNumber" name="roomNumber" required>

      <label for="planningDate">Date:</label>
      <input id="planningDate" type="date" [(ngModel)]="planningDate" name="planningDate" required>

      <label for="surgeriesList">Surgeries (comma-separated IDs):</label>
      <input id="surgeriesList" type="text" [(ngModel)]="surgeriesList" name="surgeriesList" required>

      <button type="submit" [disabled]="loading">Start Optimized Planning</button>
    </form>

    <div *ngIf="loading">Loading...</div>

    <div *ngIf="planningResult">
      <h3>Planning Result:</h3>
      <!-- Display the planning result -->
      <pre>{{ planningResult | json }}</pre>
    </div>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- 6.3.2-->
  <section [style.display]="selectedSection === 'dimensionPlanning' ? 'block' : 'none'">
    <h2>Dimension in Terms of Number of Surgeries</h2>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <form (ngSubmit)="performComplexityAnalysis()">
      <label for="roomNumber">Room Number:</label>
      <input id="roomNumber" type="text" [(ngModel)]="roomNumber" name="roomNumber" required>

      <label for="planningDate">Date:</label>
      <input id="planningDate" type="date" [(ngModel)]="planningDate" name="planningDate" required>

      <button type="submit" [disabled]="loading">Perform Complexity Analysis</button>
    </form>

    <div *ngIf="loading">Loading...</div>

    <div *ngIf="planningResult">
      <h3>Complexity Analysis Result:</h3>
      <!-- Display the analysis result -->
      <pre>{{ planningResult | json }}</pre>
    </div>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>

  <!-- 6.3.3-->
  <section [style.display]="selectedSection === 'preferedPlanning' ? 'block' : 'none'">
    <h2>Heuristic Planning</h2>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <form (ngSubmit)="startHeuristicPlanning()">
      <label for="roomNumber">Room Number:</label>
      <input id="roomNumber" type="text" [(ngModel)]="roomNumber" name="roomNumber" required>

      <label for="planningDate">Date:</label>
      <input id="planningDate" type="date" [(ngModel)]="planningDate" name="planningDate" required>

      <label for="surgeriesList">Surgeries (comma-separated IDs):</label>
      <input id="surgeriesList" type="text" [(ngModel)]="surgeriesList" name="surgeriesList" required>

      <label for="heuristic">Heuristic to Use:</label>
      <input id="heuristic" type="text" [(ngModel)]="heuristic" name="heuristic" required>

      <button type="submit" [disabled]="loading">Start Heuristic Planning</button>
    </form>

    <div *ngIf="loading">Loading...</div>

    <div *ngIf="planningResult">
      <h3>Planning Result:</h3>
      <!-- Display the planning result -->
      <pre>{{ planningResult | json }}</pre>
    </div>

    <button (click)="showSection('')">Back to Main Menu</button>
  </section>






</div>
<p>Current Section: {{ selectedSection }}</p>

